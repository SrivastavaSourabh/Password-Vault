(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{477:()=>{},4587:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(5155),a=r(2115);async function l(e){try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),!0;{let t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();let r=document.execCommand("copy");return document.body.removeChild(t),r}}catch(e){return console.error("Failed to copy text: ",e),!1}}let n={length:12,includeNumbers:!0,includeLetters:!0,includeSymbols:!0,excludeLookAlikes:!1};function o(){let e,[t,r]=(0,a.useState)(n),[o,i]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),u=async()=>{o&&(await l(o)?(c(!0),setTimeout(()=>c(!1),2e3)):alert("Failed to copy to clipboard"))},m=o?(e=0,o.length>=8&&(e+=1),o.length>=12&&(e+=1),o.length>=16&&(e+=1),/[a-z]/.test(o)&&(e+=1),/[A-Z]/.test(o)&&(e+=1),/[0-9]/.test(o)&&(e+=1),/[^a-zA-Z0-9]/.test(o)&&(e+=1),Math.min(e,5)):0;return(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-md p-6 max-w-md mx-auto",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6 text-center",children:"Password Generator"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:o,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md bg-gray-50 dark:bg-dark-700 text-sm font-mono text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-400",placeholder:"Generated password will appear here"}),(0,s.jsx)("button",{onClick:u,disabled:!o,className:"px-4 py-2 rounded-md text-sm font-medium ".concat(d?"bg-green-500 text-white":o?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:d?"Copied!":"Copy"})]}),o&&(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-300 mb-1",children:[(0,s.jsx)("span",{children:"Strength:"}),(0,s.jsx)("span",{className:"font-medium",children:["Very Weak","Weak","Fair","Good","Strong","Very Strong"][m]||"Very Weak"})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 dark:bg-dark-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(["bg-red-500","bg-orange-500","bg-yellow-500","bg-blue-500","bg-green-500","bg-green-600"][m]||"bg-red-500"),style:{width:"".concat(m/5*100,"%")}})})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Length: ",t.length]}),(0,s.jsx)("input",{type:"range",min:"4",max:"50",value:t.length,onChange:e=>r({...t,length:parseInt(e.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),(0,s.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.includeLetters,onChange:e=>r({...t,includeLetters:e.target.checked}),className:"mr-2"}),(0,s.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include letters (a-z, A-Z)"})]}),(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.includeNumbers,onChange:e=>r({...t,includeNumbers:e.target.checked}),className:"mr-2"}),(0,s.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include numbers (0-9)"})]}),(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.includeSymbols,onChange:e=>r({...t,includeSymbols:e.target.checked}),className:"mr-2"}),(0,s.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include symbols (!@#$%^&*)"})]}),(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.excludeLookAlikes,onChange:e=>r({...t,excludeLookAlikes:e.target.checked}),className:"mr-2"}),(0,s.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Exclude look-alike characters (l, 1, I, O, 0)"})]})]}),(0,s.jsx)("button",{onClick:()=>{try{let e=function(e){let t="";if(e.includeLetters&&(t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.includeNumbers&&(t+="0123456789"),e.includeSymbols&&(t+="!@#$%^&*()_+-=[]{}|;:,.<>?"),e.excludeLookAlikes)for(let e of"l1I|o0O")t=t.replace(RegExp(e,"g"),"");if(0===t.length)throw Error("At least one character type must be selected");let r="";for(let s=0;s<e.length;s++){let e=Math.floor(Math.random()*t.length);r+=t[e]}return r}(t);i(e),c(!1)}catch(e){console.error("Error generating password:",e),alert("Error generating password. Please check your options.")}},className:"w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition-colors font-medium",children:"Generate Password"})]})}function i(e){let{mode:t,onSubmit:r,onToggleMode:l,loading:n,error:o}=e,[i,d]=(0,a.useState)(""),[c,u]=(0,a.useState)("");return(0,s.jsxs)("div",{className:"bg-dark-800/50 backdrop-blur-sm rounded-lg shadow-xl border border-dark-700 p-6 max-w-md mx-auto",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:"login"===t?"Sign In":"Sign Up"}),o&&(0,s.jsx)("div",{className:"bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded mb-4",children:o}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(i,c)},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),(0,s.jsx)("input",{type:"email",id:"email",value:i,onChange:e=>d(e.target.value),required:!0,className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent",placeholder:"Enter your email"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),(0,s.jsx)("input",{type:"password",id:"password",value:c,onChange:e=>u(e.target.value),required:!0,minLength:6,className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent",placeholder:"Enter your password"})]}),(0,s.jsx)("button",{type:"submit",disabled:n,className:"w-full py-2 px-4 rounded-md font-medium transition-colors ".concat(n?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-blue-500/25"),children:n?"Loading...":"login"===t?"Sign In":"Sign Up"})]}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsx)("button",{onClick:l,className:"text-blue-400 hover:text-blue-300 text-sm transition-colors",children:"login"===t?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})}var d=r(316),c=r.n(d);function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16;return c().lib.WordArray.random(e)}function m(e){let{item:t,onEdit:r,onDelete:n,userPassword:o}=e,[i,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(null),m=async(e,t)=>{await l(e)&&(u(t),setTimeout(()=>u(null),2e3))};return(0,s.jsxs)("div",{className:"bg-dark-800/50 backdrop-blur-sm rounded-lg shadow-xl p-4 border border-dark-700 hover:border-dark-600 transition-colors",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:t.title}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>r(t),className:"text-blue-400 hover:text-blue-300 text-sm transition-colors",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to delete this item?")&&(console.log("Delete item with ID:",t._id),t._id?n(t._id):(console.error("Item ID is undefined, cannot delete"),alert("Error: Item ID is missing. Cannot delete this item.")))},className:"text-red-400 hover:text-red-300 text-sm transition-colors",children:"Delete"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[t.username&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"Username:"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-sm font-mono text-gray-200",children:t.username}),(0,s.jsx)("button",{onClick:()=>m(t.username,"username"),className:"text-blue-400 hover:text-blue-300 text-xs transition-colors",children:"username"===c?"Copied!":"Copy"})]})]}),t.password&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"Password:"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-sm font-mono text-gray-200",children:i?t.password:"••••••••"}),(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("button",{onClick:()=>d(!i),className:"text-gray-400 hover:text-gray-300 text-xs transition-colors",children:i?"Hide":"Show"}),(0,s.jsx)("button",{onClick:()=>m(t.password,"password"),className:"text-blue-400 hover:text-blue-300 text-xs transition-colors",children:"password"===c?"Copied!":"Copy"})]})]})]}),t.url&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"URL:"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-sm truncate max-w-32 transition-colors",children:t.url}),(0,s.jsx)("button",{onClick:()=>m(t.url,"url"),className:"text-blue-400 hover:text-blue-300 text-xs transition-colors",children:"url"===c?"Copied!":"Copy"})]})]}),t.notes&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"Notes:"}),(0,s.jsx)("p",{className:"text-sm text-gray-200 mt-1",children:t.notes})]})]})]})}function x(e){let{item:t,onSubmit:r,onCancel:l,loading:n}=e,[o,i]=(0,a.useState)({_id:(null==t?void 0:t._id)||void 0,title:(null==t?void 0:t.title)||"",username:(null==t?void 0:t.username)||"",password:(null==t?void 0:t.password)||"",url:(null==t?void 0:t.url)||"",notes:(null==t?void 0:t.notes)||""});(0,a.useEffect)(()=>{t?i({_id:t._id,title:t.title||"",username:t.username||"",password:t.password||"",url:t.url||"",notes:t.notes||""}):i({_id:void 0,title:"",username:"",password:"",url:"",notes:""})},[t]);let d=(e,t)=>{i(r=>({...r,[e]:t}))};return(0,s.jsxs)("div",{className:"bg-dark-800/50 backdrop-blur-sm rounded-lg shadow-xl border border-dark-700 p-6 max-w-md mx-auto",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:o._id?"Edit Item":"Add New Item"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(o)},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Title"}),(0,s.jsx)("input",{type:"text",value:o.title,onChange:e=>d("title",e.target.value),required:!0,className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent",placeholder:"e.g., Gmail Account"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Username/Email"}),(0,s.jsx)("input",{type:"text",value:o.username,onChange:e=>d("username",e.target.value),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent",placeholder:"username@example.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),(0,s.jsx)("input",{type:"password",value:o.password,onChange:e=>d("password",e.target.value),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent",placeholder:"Enter password"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"URL"}),(0,s.jsx)("input",{type:"url",value:o.url,onChange:e=>d("url",e.target.value),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent",placeholder:"https://example.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes"}),(0,s.jsx)("textarea",{value:o.notes,onChange:e=>d("notes",e.target.value),rows:3,className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent",placeholder:"Additional notes..."})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{type:"submit",disabled:n,className:"flex-1 py-2 px-4 rounded-md font-medium transition-colors ".concat(n?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-blue-500/25"),children:n?"Saving...":o._id?"Update":"Save"}),(0,s.jsx)("button",{type:"button",onClick:l,className:"flex-1 py-2 px-4 border border-dark-600 text-gray-300 rounded-md hover:bg-dark-700 hover:text-white transition-colors",children:"Cancel"})]})]})]})}function h(e){let{userId:t,userPassword:r}=e,[l,n]=(0,a.useState)([]),[o,i]=(0,a.useState)(!0),[d,h]=(0,a.useState)(!1),[g,b]=(0,a.useState)(null),[p,y]=(0,a.useState)(""),f=async()=>{try{i(!0);let e=await fetch("/api/vault?userId=".concat(t)),s=await e.json();if(e.ok){let e=s.vaultItems.map(e=>{try{return{...function(e,t){let r=JSON.parse(e),s=c().enc.Hex.parse(r.s),a=c().enc.Hex.parse(r.iv),l=c().PBKDF2(t,s,{keySize:8,iterations:1e3,hasher:c().algo.SHA256}),n=c().lib.CipherParams.create({ciphertext:c().enc.Base64.parse(r.ct)}),o=c().AES.decrypt(n,l,{iv:a,mode:c().mode.CBC,padding:c().pad.Pkcs7}).toString(c().enc.Utf8);if(!o)throw Error("Failed to decrypt data");return JSON.parse(o)}(e.encryptedData,r),_id:e._id}}catch(e){return console.error("Error decrypting item:",e),null}}).filter(Boolean);n(e)}else console.error("Error fetching vault items:",s.error)}catch(e){console.error("Error fetching vault items:",e)}finally{i(!1)}};(0,a.useEffect)(()=>{t&&r&&f()},[t,r]);let w=async e=>{try{console.log("Saving item:",e);let s=function(e,t){let r=JSON.stringify(e),s=u(16),a=u(16),l=c().PBKDF2(t,s,{keySize:8,iterations:1e3,hasher:c().algo.SHA256});return JSON.stringify({ct:c().AES.encrypt(r,l,{iv:a,mode:c().mode.CBC,padding:c().pad.Pkcs7}).ciphertext.toString(c().enc.Base64),iv:a.toString(c().enc.Hex),s:s.toString(c().enc.Hex)})}(e,r),a=g?"/api/vault/".concat(g._id):"/api/vault",l=g?"PUT":"POST";console.log("API call:",{url:a,method:l,userId:t});let n=await fetch(a,{method:l,headers:{"Content-Type":"application/json"},body:JSON.stringify({encryptedData:s,userId:t})});if(console.log("Response status:",n.status),n.ok)console.log("Item saved successfully"),await f(),h(!1),b(null);else{let e=await n.json();console.error("Error saving item:",e.error),alert("Error saving item: ".concat(e.error||"Please try again."))}}catch(e){console.error("Error saving item:",e),alert("Error saving item: ".concat(e instanceof Error?e.message:"Please try again."))}},j=e=>{b(e),h(!0)},v=async e=>{try{let r=await fetch("/api/vault/".concat(e,"?userId=").concat(t),{method:"DELETE"});if(r.ok)await f();else{let e=await r.json();console.error("Error deleting item:",e.error),alert("Error deleting item. Please try again.")}}catch(e){console.error("Error deleting item:",e),alert("Error deleting item. Please try again.")}},N=l.filter(e=>e.title.toLowerCase().includes(p.toLowerCase())||e.username.toLowerCase().includes(p.toLowerCase())||e.url.toLowerCase().includes(p.toLowerCase())||e.notes.toLowerCase().includes(p.toLowerCase()));return o?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"text-gray-400",children:"Loading vault items..."})}):(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Vault"}),(0,s.jsx)("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors shadow-lg hover:shadow-blue-500/25",children:"Add New Item"})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("input",{type:"text",placeholder:"Search vault items...",value:p,onChange:e=>y(e.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-dark-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"})}),d&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:(0,s.jsx)("div",{className:"max-h-screen overflow-y-auto",children:(0,s.jsx)(x,{item:g||void 0,onSubmit:w,onCancel:()=>{h(!1),b(null)}})})}),0===N.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-400",children:p?"No items match your search.":"No vault items yet. Add your first item!"}):(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:N.map(e=>(0,s.jsx)(m,{item:e,onEdit:j,onDelete:v,userPassword:r},e._id))})]})}function g(){let[e,t]=(0,a.useState)(null),[r,l]=(0,a.useState)(""),[n,d]=(0,a.useState)("login"),[c,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(""),g=async(e,r)=>{u(!0),x("");try{let s=await fetch("login"===n?"/api/auth/login":"/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})}),a=await s.json();s.ok?(t({id:a.userId,email:a.email||e}),l(r)):x(a.error||"Authentication failed")}catch(e){x("Network error. Please try again.")}finally{u(!1)}};return e?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-dark-900 via-dark-800 to-dark-900",children:[(0,s.jsx)("header",{className:"bg-dark-800/50 backdrop-blur-sm shadow-lg border-b border-dark-700",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold text-white",children:"Password Generator + Secure Vault"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("span",{className:"text-sm text-gray-300",children:e.email}),(0,s.jsx)("button",{onClick:()=>{t(null),l("")},className:"text-sm text-gray-400 hover:text-white transition-colors",children:"Logout"})]})]})})}),(0,s.jsx)("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)(o,{}),(0,s.jsx)(h,{userId:e.id,userPassword:r})]})})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-dark-900 via-dark-800 to-dark-900",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Password Generator + Secure Vault"}),(0,s.jsx)("p",{className:"text-gray-300",children:"Generate strong passwords and store them securely"})]}),(0,s.jsx)(i,{mode:n,onSubmit:g,onToggleMode:()=>{d("login"===n?"register":"login"),x("")},loading:c,error:m})]})})}},5253:(e,t,r)=>{Promise.resolve().then(r.bind(r,4587))}},e=>{e.O(0,[316,441,255,358],()=>e(e.s=5253)),_N_E=e.O()}]);